import{d as e,t as n,c as t,e as o,l as i,r as l,a,w as u,b as c,o as r,f as s,g as d,v,h as f,i as h,j as p,k as g,F as m,m as y,n as b,p as w}from"./vendor.5597e174.js";var x=[{icon:"icon-zitibiaoti",title:"标题",showIcon:!0,children:[{text:"H1",size:32,title:"一级标题",content:"\n# h1"},{text:"H2",size:24,title:"二级标题",content:"\n## h2"},{text:"H3",size:18,title:"三级标题",content:"\n### h3"},{text:"H4",size:16,title:"四级标题",content:"\n#### h4"}]},{icon:"icon-zitijiacu",title:"加粗",content:"**加粗** ",showIcon:!0},{icon:"icon-zitixieti",title:"斜体",content:"*斜体* ",showIcon:!0},{icon:"icon-zitishanchuxian",title:"删除线",content:"~~删除线~~ ",showIcon:!0},{icon:"icon-zitixiahuaxian",title:"下划线",content:"<u>下划线</u>",showIcon:!0},{icon:"icon-charulianjie",title:"链接",content:"[世说新语](https://react.hellomrbigbigshot.xyz)",showIcon:!0},{icon:"icon-yinyong",title:"引用",content:"\n> 这是一段引用文字",showIcon:!0},{icon:"icon-zitidaima",title:"代码块",content:"\n```\n console.log('hello world');\n```\n",showIcon:!0},{icon:"icon-charutupian",title:"图片",content:"![这是一张图片](https://hellomrbigbigshot.xyz/api/file/avatar?filename=1534775389648.png)",showIcon:!0},{icon:"icon-youxupailie",title:"有序列表",content:"\n1. 列表1 \n2. 列表2 \n3. 列表3",showIcon:!0},{icon:"icon-wuxupailie",title:"无序列表",content:"\n\n- 列表1 \n- 列表2 \n- 列表3",showIcon:!0},{icon:"icon-fengexian",title:"分割线",content:"\n***\n",showIcon:!0},{icon:"icon-biaodanzujian-biaoge",title:"表格",content:"\n标题1 | 标题2 \n---  |---\n第一行第一列 | 第一行第二列\n第二行第一列 | 第二行第二列\n",showIcon:!0},{icon:"icon-zuoduiqi",title:"左对齐",content:'\n<p align="left">左对齐</p>\n',showIcon:!0},{icon:"icon-juzhongduiqi",title:"居中对齐",content:"\n<center>居中对齐</center>\n",showIcon:!0},{icon:"icon-youduiqi",title:"右对齐",content:'\n<p align="right">右对齐</p>\n',showIcon:!0}],T=e({name:"ToolTip",setup:function(e,n){var o=n.slots,i=l(!1),a=l(!1),u=function(e,n){e.stopPropagation(),"content"===n&&(a.value=!0),i.value=!0},c=function(e,n){e.stopPropagation(),"main"===n?setTimeout((function(){a.value||(i.value=!1)}),500):"content"===n&&(a.value=!1,i.value=!1)};return function(){var e,n;return t("div",{class:"tooltip-wrapper"},[t("div",{onMouseenter:function(e){return u(e,"main")},onMouseleave:function(e){return c(e,"main")}},[null===(e=o.default)||void 0===e?void 0:e.call(o)]),t("div",{class:["tooltip-content",i.value?"mouse-in":""],onMouseenter:function(e){return u(e,"content")},onMouseleave:function(e){return c(e,"content")}},[null===(n=o.content)||void 0===n?void 0:n.call(o)])])}}}),S=[{mode:"edit",title:"编辑",icon:"icon-tianxie"},{mode:"live",title:"分栏",icon:"icon-fenlan"},{mode:"preview",title:"预览",icon:"icon-zitiyulan"}],z=e({name:"Toolbar",components:{ToolTip:T},props:{fullScreen:{type:Boolean,default:!1},mode:{type:String,default:"live"},iconLength:{type:Number,required:!0}},emits:["mode-change","append-content","fullscreen-change"],setup:function(e,o){var i=o.emit,l=n(e),a=l.fullScreen,u=l.mode,c=l.iconLength,r=function(e){i("append-content",e)},s=function(e){return{default:function(){return t("span",{class:["iconfont",e.icon],title:e.title},null)},content:function(){var n;return null===(n=e.children)||void 0===n?void 0:n.map((function(e,n){return t("div",{key:n},[t("span",{style:{fontSize:e.size+"px"},title:e.title,onClick:function(){return r(e.content)}},[e.text])])}))}}};return function(){return t("div",{class:"editor-toolbar"},[t("ul",{class:"editor-toolbar-tools"},[x.map((function(e,n){return e.showIcon&&n<c.value?t("li",{key:n},[e.children&&e.children.length?t(T,null,s(e)):t("span",{class:["iconfont",e.icon],title:e.title,onClick:function(){return r(e.content)}},null)]):null}))]),t("ul",{class:"editor-toolbar-mode"},[t("li",null,[t("span",{class:["iconfont",a.value?"icon-huanyuanhuabu":"icon-quanping"],title:a.value?"还原":"全屏",onClick:function(){return e=!a.value,void i("fullscreen-change",e);var e}},null)]),S.map((function(e,n){return t("li",{key:n},[t("span",{class:["iconfont",e.icon,u.value===e.mode&&"muted"],onClick:function(){var n;(n=e.mode)!==u.value&&i("mode-change",n,u.value)}},null)])}))])])}}}),C=e({name:"SideColumn",props:{length:{type:Number,required:!0}},setup:function(e){var o=n(e).length;return function(){return t("ul",{class:"editor-content-edit-line-num"},[new Array(o.value).fill("").map((function(e,n){return t("li",{class:{"scale-li":o.value>9999},key:n},[n+1])}))])}}}),j="object"==typeof global&&global&&global.Object===Object&&global,M="object"==typeof self&&self&&self.Object===Object&&self,I=j||M||Function("return this")(),O=I.Symbol,k=Object.prototype,N=k.hasOwnProperty,E=k.toString,H=O?O.toStringTag:void 0;var L=Object.prototype.toString;var V=O?O.toStringTag:void 0;function F(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":V&&V in Object(e)?function(e){var n=N.call(e,H),t=e[H];try{e[H]=void 0;var o=!0}catch(l){}var i=E.call(e);return o&&(n?e[H]=t:delete e[H]),i}(e):function(e){return L.call(e)}(e)}var q=/\s/;var A=/^\s+/;function B(e){return e?e.slice(0,function(e){for(var n=e.length;n--&&q.test(e.charAt(n)););return n}(e)+1).replace(A,""):e}function W(e){var n=typeof e;return null!=e&&("object"==n||"function"==n)}var R=/^[-+]0x[0-9a-f]+$/i,$=/^0b[01]+$/i,D=/^0o[0-7]+$/i,P=parseInt;function U(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return null!=e&&"object"==typeof e}(e)&&"[object Symbol]"==F(e)}(e))return NaN;if(W(e)){var n="function"==typeof e.valueOf?e.valueOf():e;e=W(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=B(e);var t=$.test(e);return t||D.test(e)?P(e.slice(2),t?2:8):R.test(e)?NaN:+e}var K=function(){return I.Date.now()},Z=Math.max,G=Math.min;function J(e,n,t){var o,i,l,a,u,c,r=0,s=!1,d=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function f(n){var t=o,l=i;return o=i=void 0,r=n,a=e.apply(l,t)}function h(e){return r=e,u=setTimeout(g,n),s?f(e):a}function p(e){var t=e-c;return void 0===c||t>=n||t<0||d&&e-r>=l}function g(){var e=K();if(p(e))return m(e);u=setTimeout(g,function(e){var t=n-(e-c);return d?G(t,l-(e-r)):t}(e))}function m(e){return u=void 0,v&&o?f(e):(o=i=void 0,a)}function y(){var e=K(),t=p(e);if(o=arguments,i=this,c=e,t){if(void 0===u)return h(c);if(d)return clearTimeout(u),u=setTimeout(g,n),f(c)}return void 0===u&&(u=setTimeout(g,n)),a}return n=U(n)||0,W(t)&&(s=!!t.leading,l=(d="maxWait"in t)?Z(U(t.maxWait)||0,n):l,v="trailing"in t?!!t.trailing:v),y.cancel=function(){void 0!==u&&clearTimeout(u),r=0,o=c=i=u=void 0},y.flush=function(){return void 0===u?a:m(K())},y}function Q(e,n,t){var o=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return W(t)&&(o="leading"in t?!!t.leading:o,i="trailing"in t?!!t.trailing:i),J(e,n,{leading:o,maxWait:n,trailing:i})}o.setOptions({renderer:new o.Renderer,highlight:function(e){return i.highlightAuto(e).value},pedantic:!1,gfm:!0,breaks:!0,headerIds:!0,sanitize:!1,smartLists:!0,smartypants:!1,xhtml:!1});var X=function(e){return o(e).replace(/<code( class="language-[A-Za-z]*")?>/g,'<code class="hljs">')},Y=f({name:"App",components:{MEditor:e({name:"VueNextMEditor",components:{ToolBar:z,Column:C},props:{modelValue:{type:String,default:""},placeholder:{type:String,default:""},fullScreen:{type:Boolean,default:!1},showLineNum:{type:Boolean,default:!0},mode:{type:String,default:"live",validator:function(e){return["live","edit","preview"].includes(e)}},theme:{type:String,default:"light",validator:function(e){return["light","dark"].includes(e)}},autoScroll:{type:Boolean,default:!0},debounceRender:{type:Boolean,default:!0},debounceRenderWait:{type:Number,default:200}},setup:function(e,o){var i=o.emit,f=n(e),h=f.showLineNum,p=f.placeholder,g=f.autoScroll,m=f.debounceRenderWait,y=f.debounceRender,b=l(x.length),w=l(1),T=l(e.mode),S=l(e.theme),j=l(e.fullScreen),M=a({get:function(){return e.modelValue},set:function(e){i("update:modelValue",e)}}),I=l(""),O=l("edit"),k=l(null),N=l(null),E=l(null),H=l(null),L=l(null),V=function(e,n){T.value=e,i("on-mode-change",e,n)},F=function(e){j.value=e,i("on-fullscreen-change",e)},q=J((function(e){I.value=X(e)}),m.value),A=g.value?Q((function(){var e=E.value.scrollHeight-E.value.clientHeight,n=H.value.scrollHeight-H.value.clientHeight;"edit"===O.value?H.value.scrollTop=E.value.scrollTop/e*n:"preview"===O.value&&(E.value.scrollTop=H.value.scrollTop/n*e)}),200):void 0,B=function(e){var n=N.value.selectionStart||0;n>-1&&(M.value=""+M.value.slice(0,n)+e+M.value.slice(n),N.value.blur(),setTimeout((function(){N.value.selectionStart=n+e.length,N.value.selectionEnd=n+e.length,N.value.focus()})))},W=function(){var e=k.value.clientWidth,n=0;e>780?n=x.length:e>680?n=x.length-3:e>640?n=x.length-6:e>500&&(n=0,T.value="edit"),b.value=n,$()},R=Q(W,300),$=function(){var e=L.value.scrollHeight,n=Math.max(M.value.split("\n").length,(e-20)/30);w.value=n},D=function(e){"Tab"===e.code&&(B("    "),e.preventDefault&&e.preventDefault())};return u([j,T],(function(){setTimeout((function(){$()}),200)})),c((function(){var e;setTimeout((function(){$()}),200),i("on-change",{content:M.value,htmlContent:X(M.value)}),e=M.value,y.value?q(e):I.value=X(e)})),r((function(){window.addEventListener("resize",R),W()})),s((function(){window.removeEventListener("resize",R)})),function(){return t("div",{ref:k,class:["editor",S.value+"-editor",j.value&&"editor-fullscreen"]},[t(z,{iconLength:b.value,mode:T.value,"full-screen":j.value,"onMode-change":V,"onFullscreen-change":F,"onAppend-content":B},null),t("div",{class:"editor-content"},[t("div",{class:["editor-content-edit","edit"===T.value&&"active","preview"===T.value&&"inactive"],ref:E,onMouseenter:function(){O.value="edit"},onScroll:A},[t("div",{class:"editor-content-edit-block"},[h.value?t(C,{length:w.value},null):"",t("div",{class:"editor-content-edit-input"},[t("div",{ref:L},[M.value.replace(/\n$/,"\n ")]),d(t("textarea",{ref:N,"onUpdate:modelValue":e=>M.value=e,placeholder:p.value,onKeydown:D},null),[[v,M.value]])])])]),t("div",{class:["editor-content-preview","preview"===T.value&&"active","edit"===T.value&&"inactive"],ref:H,onMouseenter:function(){return O.value="preview"},onScroll:A},[t("div",{class:"m-editor-preview",innerHTML:I.value},null)])])])}}})},setup:()=>({value:h("# hello world"),handleChange:({content:e,htmlContent:n})=>{console.log("content",e),console.log("htmlContent",n)},handleFullScreenChange:e=>{console.log("fullscreenChange",e)},handleModeChange:(e,n)=>{console.log("newMode",e,"oldMode",n)}})});const _=g("img",{alt:"Vue logo",src:"./assets/logo.03d6d6da.png"},null,-1);Y.render=function(e,n,t,o,i,l){const a=y("MEditor");return b(),p(m,null,[_,g(a,{modelValue:e.value,"onUpdate:modelValue":n[1]||(n[1]=n=>e.value=n),mode:"edit",onOnChange:e.handleChange,onOnFullscreenChange:e.handleFullScreenChange,onOnModeChange:e.handleModeChange},null,8,["modelValue","onOnChange","onOnFullscreenChange","onOnModeChange"])],64)},w(Y).mount("#app");
